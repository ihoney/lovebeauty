UPDATE book_time bt, ( SELECT CASE HOUR (NOW()) WHEN 10 THEN 1 WHEN 11 THEN 2 WHEN 12 THEN 3 WHEN 13 THEN 4 WHEN 14 THEN 5 WHEN 15 THEN 6 WHEN 16 THEN 7 WHEN 17 THEN 8 WHEN 18 THEN 9 WHEN 19 THEN 10 WHEN 20 THEN 11 WHEN 21 THEN 12 ELSE - 1 END AS curHour ) tab SET today = LPAD( SUBSTR(today, tab.curHour + 1), 12, '1' ) WHERE tab.curHour > - 1